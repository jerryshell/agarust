syntax = "proto3";

package proto;

message Packet {
  oneof data {
    Hello hello = 1;
    Chat chat = 2;
    UpdatePlayer update_player = 3;
    UpdatePlayerBatch update_player_batch = 4;
    UpdatePlayerDirectionAngle update_player_direction_angle = 5;
    UpdateSpore update_spore = 6;
    UpdateSporeBatch update_spore_batch = 7;
    ConsumeSpore consume_spore = 8;
    ConsumePlayer consume_player = 9;
  }
}

message Hello { string connection_id = 1; }

message Chat {
  string connection_id = 1;
  string msg = 2;
}

message UpdatePlayer {
  string connection_id = 1;
  string name = 2;
  double x = 3;
  double y = 4;
  double radius = 5;
  double direction_angle = 6;
  double speed = 7;
  int32 color = 8;
}

message UpdatePlayerBatch { repeated UpdatePlayer update_player_batch = 1; }

message UpdatePlayerDirectionAngle { double direction_angle = 1; }

message UpdateSpore {
  string id = 1;
  double x = 2;
  double y = 3;
  double radius = 4;
}

message UpdateSporeBatch { repeated UpdateSpore update_spore_batch = 1; }

message ConsumeSpore {
  string connection_id = 1;
  string spore_id = 2;
}

message ConsumePlayer {
  string connection_id = 1;
  string victim_connection_id = 2;
}
